<div class="container-fluid">
  <div class="container">
    <div class="d-inline-flex flex-column shadow">
      <div *ngIf="haveAccount==true; then iHaveAccountBlock else iDoNotHaveAccountBlock"></div>
      <ng-template #iHaveAccountBlock>
        <form [formGroup]="logInForm">
          <div class="d-flex">
            <mat-form-field appearance="outline">
              <mat-label>Login</mat-label>
              <input type="email" matInput formControlName="email">
              <mat-error *ngIf="logInForm.get('email')?.hasError('required')">Musisz podać login (adres e-mail).
              </mat-error>
              <mat-error *ngIf="logInForm.get('email')?.hasError('email')">Podana fraza nie jest adresem e-mail!
              </mat-error>
            </mat-form-field>
          </div>
          <div class="d-flex">
            <mat-form-field appearance="outline">
              <mat-label>Hasło</mat-label>
              <input type="password" matInput formControlName="password">
              <mat-error *ngIf="logInForm.get('password')?.hasError('required')">Musisz podać hasło.
              </mat-error>
            </mat-form-field>
          </div>
          <div class="d-flex">
            <button type="button" class="btn btn-success" [disabled]="!logInForm.valid" (click)="login()">Zaloguj
              się</button>
          </div>
          <h5 (click)="checkIfAccount()">Nie masz konta?</h5>
        </form>
      </ng-template>
      <ng-template #iDoNotHaveAccountBlock>
        <form [formGroup]="registerForm">
          <div class="d-flex">
            <mat-form-field appearance="outline">
              <mat-label>Login</mat-label>
              <input type="email" matInput formControlName="email">
              <mat-error *ngIf="registerForm.get('email')?.hasError('required')">Musisz podać login (adres e-mail).
              </mat-error>
              <mat-error *ngIf="registerForm.get('email')?.hasError('email')">Podana fraza nie jest adresem e-mail!
              </mat-error>
            </mat-form-field>
          </div>
          <div class="d-flex">
            <mat-form-field appearance="outline">
              <mat-label>Hasło</mat-label>
              <input type="password" matInput formControlName="password">
              <mat-error *ngIf="registerForm.get('password')?.hasError('required')">Musisz podać hasło.
              </mat-error>
            </mat-form-field>
          </div>
          <div class="d-flex">
            <mat-form-field appearance="outline">
              <mat-label>Powtórz hasło</mat-label>
              <input type="password" matInput formControlName="repeat">
              <mat-error *ngIf="registerForm.get('repeat')?.hasError('required')">Powtórz hasło.
              </mat-error>
              <mat-error *ngIf="registerForm.value.password!==registerForm.value.repeat">Wpisane hasła nie są
              </mat-error>
            </mat-form-field>
          </div>
          <div
            *ngIf="registerForm.value.password==registerForm.value.repeat; then passwordMatch else passwordDoNotMatch">
          </div>
          <ng-template #passwordMatch>
            <div class="d-flex">
              <button type="button" class="btn btn-success" [disabled]="!registerForm.valid"
                (click)="register()">Zarejestruj
              </button>
            </div>
          </ng-template>
          <ng-template #passwordDoNotMatch>
            <div class="d-flex">
              <button type="button" class="btn btn-success disabled" (click)="register()">Zarejestruj
              </button>
            </div>
          </ng-template>
          <h5 (click)="checkIfAccount()">Jednak mam konto!</h5>
        </form>
      </ng-template>
    </div>
  </div>
</div>
